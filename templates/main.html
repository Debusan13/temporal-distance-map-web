<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
  <!--custom css-->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css')  }}">


  <title>Temporal Distance Map</title>
  <link rel="icon" href="/static/layers-24px.svg">
</head>

<body>
  <!--Navigation Bar-->
  <div class="collapse" id="navbarToggleExternalContent">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <a class="navbar-brand">Temporal Distance Map</a>
      <div class="collapse navbar-collapse show" id="navbarNavAltMarkup">
        <div class="navbar-nav">
          <a class="nav-item nav-link active" href="#">Home <span class="sr-only">(current)</span></a>
          <a class="nav-item nav-link" href="https://github.com/Debusan13/temporal-distance-map-web">Github</a>
          <a class="nav-item nav-link" href="https://sites.google.com/view/ai-research-program/">Research Lab</a>
        </div>
      </div>
      <span class="text-muted">Created by Elijah Nacar and Devak Nanda</span>
    </nav>
  </div>

  <nav class="navbar navbar-dark bg-dark">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggleExternalContent"
      aria-controls="navbarToggleExternalContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  </nav>

  <!--Form Submission-->
  <div class="p-3">
    <form method="POST">
      <div class="form-group">
        <label for="inputAPIKey">Bing Maps API Key</label>
        <input type="text" class="form-control" name="apiKey">
        <a href=https://www.bingmapsportal.com/ target="_blank"><small id="emailHelp"
            class="form-text text-muted">Create
            one here.</small></a>
      </div>

      <div class="form-row">
        <div class="form-group col-md-6">
          <label for="inputLattitude">Latitude</label>
          <input type="text" class="form-control" name="lat">
        </div>
        <div class="form-group col-md-6">
          <label for="inputLongitude">Longitude</label>
          <input type="text" class="form-control" name="long">
        </div>
      </div>

      <button type="submit" class="btn btn-primary" name="Preview">Preview</button>
      <button type="submit" class="btn btn-primary" name="Submit">Create Map</button>
    </form>
  </div>

  <!--Image Preview-->
  <br>
  <div class="card mx-auto" style="width: 20rem;">
    <img src={{map_preview_src}} class="card-img-top" alt="...">
    <h3 class="card-title mx-auto">Map Preview</h5>
  </div>
  <br>

  <!--Loading Bar-->
  <div class="mx-auto p-3">
    <div class="progress mx-auto" style="width: 500px;">
      <div class="progress-bar bg-info" id="time-bar" role="progressbar" style="width: 0%" aria-valuemin="0"
        aria-valuemax="100"></div>
      <div class="progress-bar bg-success" id="prog-bar" role="progressbar" style="width: 0%" aria-valuemin="0"
        aria-valuemax="100"></div>
    </div>
  </div>

  <!--Video Preview-->
  <br>
  <div class="card mx-auto" style="width: 400px;">
    <div class="embed-responsive embed-responsive-1by1" style="width: 400px; height: 400px;">
      <video class="embed-responsive-item" src="/static/warpAnimation.mp4" controls></video>
    </div>
  </div>
  <br>

  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
    integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
    crossorigin="anonymous"></script>
  <!-- Optional JavaScript -->
  <script>
    var checker = '{{p}}';

    function readTime() {
      var str_to_parse, comp_str = "100", match_str;

      do {
        jQuery.get('static/time.txt', function (data) {
          str_to_parse = data;
        });
        match_str = str_to_parse.split("%")
        document.getElementById("time-bar").style.width = match_str[0];
      } while (comp_str != match_str);
    }

    function readv_() {
      var comp_str = "100", match_str;

      do {
        jQuery.get('static/v_progress.txt', function (data) {
          match_str = data;
        });
        document.getElementById("prog-bar").style.width = match_str;
      } while (comp_str != match_str);
    }

    if (checker == 1) {
      readTime();
      readv_();
    }

  </script>

</body>

</html>